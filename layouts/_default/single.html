{{ define "main" }}
<article class="article-single py-4">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <!-- Article Header -->
                <header class="article-header mb-4">
                    <!-- Breadcrumb -->
                    <nav aria-label="breadcrumb" class="mb-3">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="{{ .Site.BaseURL }}">홈</a></li>
                            {{ if .Section }}
                            <li class="breadcrumb-item"><a href="{{ .Site.BaseURL }}{{ .Section }}/">{{ .Section | title }}</a></li>
                            {{ end }}
                            <li class="breadcrumb-item active" aria-current="page">{{ .Title | truncate 50 }}</li>
                        </ol>
                    </nav>

                    <!-- Title -->
                    <h1 class="article-title mb-3">{{ .Title }}</h1>

                    <!-- Meta Information -->
                    <div class="article-meta d-flex justify-content-between align-items-center mb-4 pb-3 border-bottom">
                        <div class="meta-left">
                            <span class="author me-3">
                                <i class="fas fa-user me-1"></i>
                                {{ .Params.author | default .Site.Params.author }}
                            </span>
                            <time class="publish-date" datetime="{{ .Date.Format "2006-01-02T15:04:05" }}">
                                <i class="far fa-calendar me-1"></i>
                                {{ .Date.Format "2006년 01월 02일 15:04" }}
                            </time>
                        </div>
                        <div class="meta-right">
                            <span class="badge bg-{{ if eq .Section "automotive" }}danger{{ else if eq .Section "economy" }}warning{{ else }}secondary{{ end }}">
                                {{ .Section | title }}
                            </span>
                        </div>
                    </div>

                    <!-- Social Share Buttons -->
                    <div class="share-buttons mb-4">
                        <span class="share-label me-2">공유하기:</span>
                        <a href="#" onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent(window.location.href), 'facebook-share-dialog', 'width=800,height=600'); return false;" 
                           class="btn btn-sm btn-facebook me-2" title="페이스북으로 공유">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="#" onclick="window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(document.title) + '&url=' + encodeURIComponent(window.location.href), 'twitter-share-dialog', 'width=800,height=600'); return false;" 
                           class="btn btn-sm btn-twitter me-2" title="트위터로 공유">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="#" onclick="window.open('http://share.naver.com/web/shareView.nhn?url=' + encodeURIComponent(window.location.href) + '&title=' + encodeURIComponent(document.title), 'naver-share-dialog', 'width=800,height=600'); return false;" 
                           class="btn btn-sm btn-naver me-2" title="네이버로 공유">
                            <i class="fas fa-n"></i>
                        </a>
                        <button class="btn btn-sm btn-link-copy" onclick="navigator.clipboard.writeText(window.location.href); alert('링크가 복사되었습니다!');" title="링크 복사">
                            <i class="fas fa-link"></i>
                        </button>
                    </div>
                </header>

                <!-- Article Content -->
                <div class="article-content">
                    <!-- Featured Image -->
                    {{ if .Params.images }}
                    <figure class="article-featured-image mb-4">
                        <img src="{{ index .Params.images 0 }}" 
                             alt="{{ .Title }}" 
                             class="img-fluid w-100 rounded"
                             loading="lazy">
                        {{ if .Params.image_caption }}
                        <figcaption class="figure-caption text-center mt-2">{{ .Params.image_caption }}</figcaption>
                        {{ end }}
                    </figure>
                    {{ end }}

                    <!-- Article Body -->
                    <div class="article-body">
                        {{ .Content }}
                    </div>
                </div>

                <!-- Article Footer -->
                <footer class="article-footer mt-5 pt-4 border-top">
                    <!-- Tags -->
                    {{ if .Params.tags }}
                    <div class="article-tags mb-4">
                        <i class="fas fa-tags me-2"></i>
                        {{ range .Params.tags }}
                        <a href="{{ $.Site.BaseURL }}tags/{{ . | urlize }}/" class="badge bg-secondary text-decoration-none me-1">{{ . }}</a>
                        {{ end }}
                    </div>
                    {{ end }}

                    <!-- Share buttons at bottom -->
                    <div class="share-bottom text-center py-4 bg-light rounded">
                        <p class="mb-3">이 기사가 도움이 되셨나요? 공유해주세요!</p>
                        <div class="share-buttons">
                            <a href="#" onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent(window.location.href), 'facebook-share-dialog', 'width=800,height=600'); return false;" 
                               class="btn btn-facebook me-2">
                                <i class="fab fa-facebook-f me-1"></i> 페이스북
                            </a>
                            <a href="#" onclick="window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(document.title) + '&url=' + encodeURIComponent(window.location.href), 'twitter-share-dialog', 'width=800,height=600'); return false;" 
                               class="btn btn-twitter me-2">
                                <i class="fab fa-twitter me-1"></i> 트위터
                            </a>
                            <a href="#" onclick="window.open('http://share.naver.com/web/shareView.nhn?url=' + encodeURIComponent(window.location.href) + '&title=' + encodeURIComponent(document.title), 'naver-share-dialog', 'width=800,height=600'); return false;" 
                               class="btn btn-naver">
                                <i class="fas fa-n me-1"></i> 네이버
                            </a>
                        </div>
                    </div>
                </footer>

                <!-- Related Articles -->
                {{ $related := .Site.RegularPages.Related . | first 4 }}
                {{ if $related }}
                <section class="related-articles mt-5">
                    <h3 class="h4 mb-4">관련 기사</h3>
                    <div class="row g-3">
                        {{ range $related }}
                        <div class="col-md-6">
                            <article class="related-item">
                                <a href="{{ .RelPermalink }}" class="text-decoration-none">
                                    <div class="card h-100 border-0 shadow-sm">
                                        <div class="row g-0">
                                            <div class="col-4">
                                                {{ if .Params.images }}
                                                <img src="{{ index .Params.images 0 }}" 
                                                     alt="{{ .Title }}" 
                                                     class="img-fluid h-100 rounded-start"
                                                     style="object-fit: cover;">
                                                {{ else }}
                                                <div class="no-image-placeholder d-flex align-items-center justify-content-center bg-light h-100 rounded-start">
                                                    <i class="fas fa-newspaper fa-2x text-muted"></i>
                                                </div>
                                                {{ end }}
                                            </div>
                                            <div class="col-8">
                                                <div class="card-body py-2">
                                                    <h5 class="card-title h6 mb-1">{{ .Title | truncate 50 }}</h5>
                                                    <small class="text-muted">{{ .Date.Format "2006.01.02" }}</small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </a>
                            </article>
                        </div>
                        {{ end }}
                    </div>
                </section>
                {{ end }}
            </div>

            <!-- Sidebar (optional) -->
            <div class="col-lg-4 d-none d-lg-block">
                <aside class="article-sidebar sticky-top" style="top: 100px;">
                    <!-- Latest Articles -->
                    <div class="sidebar-widget mb-4">
                        <h4 class="widget-title h5 mb-3 pb-2 border-bottom">최신 기사</h4>
                        <ul class="list-unstyled">
                            {{ range first 5 (where .Site.RegularPages "Section" "in" (slice "automotive" "economy")) }}
                            <li class="mb-3">
                                <a href="{{ .RelPermalink }}" class="text-decoration-none">
                                    <h6 class="mb-1">{{ .Title | truncate 50 }}</h6>
                                    <small class="text-muted">{{ .Date.Format "2006.01.02" }}</small>
                                </a>
                            </li>
                            {{ end }}
                        </ul>
                    </div>

                    <!-- Popular Tags -->
                    {{ if .Site.Taxonomies.tags }}
                    <div class="sidebar-widget">
                        <h4 class="widget-title h5 mb-3 pb-2 border-bottom">인기 태그</h4>
                        <div class="tag-cloud">
                            {{ range $name, $taxonomy := .Site.Taxonomies.tags }}
                            {{ if gt (len $taxonomy) 2 }}
                            <a href="{{ $.Site.BaseURL }}tags/{{ $name | urlize }}/" 
                               class="badge bg-light text-dark text-decoration-none me-1 mb-1">
                                {{ $name }} ({{ len $taxonomy }})
                            </a>
                            {{ end }}
                            {{ end }}
                        </div>
                    </div>
                    {{ end }}
                </aside>
            </div>
        </div>
    </div>
</article>
{{ end }}
